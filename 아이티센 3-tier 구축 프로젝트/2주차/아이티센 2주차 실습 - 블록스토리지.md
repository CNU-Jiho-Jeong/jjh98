# 블록스토리지 증설 및 마운트

### 1. 단일 구성

1. sotrage 콘솔 접속 후 스토리지 생성 키 클릭

2. sudo -i를 입력하여 관리자 권한으로 변경한다(#).

3. fdisk -l 명령어로 추가된 스토리지 확인

4. fdisk /dev/xvdb 명령어로 디스크 파티션

(n 입력 -> p 입력 -> Enter 3번 -> w입력)

5. mkfs.xfs /dev/xvdb1 명령어로 스토리지 포맷

6. 스토리지 마운트

7. blkid, lsblk 명령어로 스토리지 확인

8. vim /etc/fstab 명령어로 마운트 정보 유지 설정

### 2. 확장 구성(LVM)

1. user08-test02 라는 스토리지 추가 생성

2. 패키지 설치

3. fdisk -l 명령어로 스토리지 확인

4. fdisk /dev/xvdc 명령어로 디스크 파티션

(/dev/xvdc1 디바이스가 생성된 것을 확인할 수 있다. Id:83, system:Linux)

다시 한 번 fdisk /dev/xvdc 명령어를 기입한다. 하지만 이번에는 다른 방식으로 진행한다.

(t,L 입력)

(8e 입력 시 파티션 타입이 Linux -> Linux LVM으로 변함. 그리고 나서 w입력)

5. Physical Volume 생성 (물리적인 디스크를 LVM 데이터 구조를 사용할 수 있도록 생성해준다)

나머지 디스크도 physical volume을 생성해준다.


6. Volume Group 생성

- 1개 이상의 PV들이 속해있는 그룹을 칭함.

- xvdc1을 추가해 볼륨 확장

7. Logical Volume 생성

- PV, VG로 구성되어있는 공간을 전체 또는 분할하여 사용할수 있도록 논리적으로 할당한 공간

- 볼륨 그룹처럼, 논리 볼륨에 사용하는 이름은 관리자가 결정

- 100% 전체 용량으로 실습

(DATA라는 Logical Volume 생성)

- Volume 마운트 하여 사용하기


- 기존 데이타가 있는 상태에서 LVM으로의 활용은 데이타 망실 등의 위험이 있으니 최초에 블록 디스크를 어떤식으로 활용하고 운영할지에 대해 정책을 충분히 체크하고 적용